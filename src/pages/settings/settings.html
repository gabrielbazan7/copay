<ion-header class="bp-header">
  <ion-navbar>
    <ion-title>{{'Settings' | translate}}</ion-title>
  </ion-navbar>
</ion-header>

<ion-content>
  <div *ngIf="appName === 'BitPay'" class="no-padding" no-padding detail-none>
    <div class="merchant-directory-container">
      <div class="merchant-directory-body">
        <h4 translate>Learn where you can spend your crypto today.</h4>
        <div (click)="openMerchantDirectorySite()" class="merchant-directory-link" href="" translate>View Directory</div>
      </div>
      <div class="gumball">
        <img src="assets/img/gumball-3.svg" class="gumball-image" width="150" height="150" />
      </div>
    </div>
  </div>
  <ion-list class="bp-list">
    <button ion-item (click)="openAddressBookPage()">
      <ion-icon class="item-img icon-settings" item-start>
        <img src="assets/img/settings-icons/icon-address-book.svg">
      </ion-icon>
      <span class="main-label" translate>Address book</span>
    </button>

    <button ion-item (click)="openHelpExternalLink()">
      <ion-icon class="item-img icon-settings" item-start>
        <img src="assets/img/settings-icons/icon-help-support.svg">
      </ion-icon>
      <span class="main-label" translate>Help &amp; support</span>
    </button>

    <button ion-item *ngIf="isCordova" (click)="openSharePage()">
      <ion-icon class="item-img icon-settings" item-start>
        <img src="assets/img/settings-icons/icon-heart.svg">
      </ion-icon>
      <span class="main-label" translate>Share</span> {{ appName }}
    </button>

    <ion-item-divider *ngIf="walletsGroups && walletsGroups[0]">
      {{'Keys' | translate}}
    </ion-item-divider>

    <button ion-item *ngFor="let walletsGroup of walletsGroups; let i = index" (click)="openWalletGroupSettings(walletsGroup[0].keyId)">
      <ion-icon *ngIf="walletsGroup[0].canSign" class="item-img icon-settings" item-start>
        <img src="assets/img/settings-icons/icon-key.svg">
      </ion-icon>
      <ion-icon *ngIf="!walletsGroup[0].canSign" item-start>
        <img src="assets/img/settings-icons/icon-read-only.svg" width="26">
      </ion-icon>
      <ion-label>
        <div class="main-label" *ngIf="walletsGroup[0].canSign">{{profileProvider.getWalletGroup(walletsGroup[0].keyId).name}}</div>
        <div class="main-label" *ngIf="!walletsGroup[0].canSign" translate>Read Only Wallets</div>
      </ion-label>
      <ion-note *ngIf="walletsGroup.length == 1" item-end>
        <span translate>{{walletsGroup.length}} Wallet</span>
      </ion-note>
      <ion-note *ngIf="walletsGroup.length > 1" item-end>
        <span translate>{{walletsGroup.length}} Wallets</span>
      </ion-note>
    </button>
    <button ion-item detail-none class="create-button" *ngIf="walletsGroups && walletsGroups[0]" (click)="goToAddView()" translate>
      Create or Import a Key
    </button>

    <ion-item-divider>{{'Preferences' | translate}}</ion-item-divider>

    <button ion-item (click)="openNotificationsPage()">
      <ion-icon class="item-img icon-settings" item-start>
        <img src="assets/img/settings-icons/icon-notifications.svg">
      </ion-icon>
      <span class="main-label" translate>Notifications</span>
    </button>

    <button ion-item (click)="openLanguagePage()">
      <ion-icon class="item-img icon-settings" item-start>
        <img src="assets/img/settings-icons/icon-language.svg">
      </ion-icon>
      <ion-label>
        <span class="main-label" translate>Language</span>
      </ion-label>
      <ion-note *ngIf="currentLanguageName" item-end>
        {{ currentLanguageName }}
      </ion-note>
    </button>

    <button ion-item (click)="openAltCurrencyPage()">
      <ion-icon class="item-img icon-settings" item-start>
        <img src="assets/img/settings-icons/icon-currency.svg">
      </ion-icon>
      <ion-label>
        <div class="main-label">
          {{'Alternative currency' | translate}}
        </div>
      </ion-label>
      <ion-note *ngIf="selectedAlternative" item-end>
        {{ selectedAlternative.name }}
      </ion-note>
    </button>

    <button ion-item (click)="openFeePolicyPage()">
      <ion-icon class="item-img icon-settings" item-start>
        <img src="assets/img/settings-icons/icon-network.svg">
      </ion-icon>
      <ion-label>
        <div class="main-label">
          {{'Bitcoin network fee policy' | translate}}
        </div>
      </ion-label>
    </button>

    <button ion-item *ngIf="isCordova" (click)="openLockPage()">
      <ion-icon class="item-img icon-settings" item-start>
        <img src="assets/img/settings-icons/icon-lock.svg">
      </ion-icon>
      <ion-label>
        <div class="main-label">
          {{'Lock' | translate}}
        </div>
      </ion-label>
      <ion-note *ngIf="lockMethod === 'disabled'" item-end>
        {{'Disabled' | translate}}
      </ion-note>
      <ion-note *ngIf="lockMethod === 'pin'" item-end>
        {{'PIN' | translate}}
      </ion-note>
      <ion-note *ngIf="lockMethod === 'fingerprint'" item-end>
        {{'Biometric' | translate}}
      </ion-note>
    </button>

    <div *ngIf="showBitPayCard && bitpayCardItems && bitpayCardItems[0]">
      <ion-item-divider>
        BitPay Visa
        <sup>&reg;</sup> Card
      </ion-item-divider>
      <ion-list>
        <button ion-item *ngFor="let card of bitpayCardItems" (click)="openCardSettings(card.id)">
          <ion-icon class="item-img icon-settings" item-start>
            <img src="assets/img/icon-card.svg" class="icon-card" />
          </ion-icon>
          <div class="main-label">BitPay Visa&reg; Card ({{card.lastFourDigits}})</div>
          <div class="item-subtitle">
            {{card.balance ? (card.balance | currency:card.currencySymbol:2) : 'Add funds to get started'|translate}} {{card.updatedOn
          ? (' &middot; ' + (card.updatedOn * 1000 | amTimeAgo)) : ''}}</div>
        </button>
        <button ion-item detail-none class="create-button" (click)="addBitpayCard()" translate>
          Add Card
        </button>
      </ion-list>
    </div>


    <ion-item-divider *ngIf="integrationServices && integrationServices[0]">
      {{'Integrations' | translate}}
    </ion-item-divider>

    <button ion-item *ngFor="let integration of integrationServices | orderBy : ['title']" (click)="openSettingIntegration(integration.name)">
      <ion-icon class="item-img" item-start>
        <img src="{{integration.icon}}" />
      </ion-icon>
      <span class="main-label">{{integration.title}}</span>
      <ion-note item-end *ngIf="integration.linked">
        <span *ngIf="integration.linked" translate>Linked</span>
        <span *ngIf="!integration.linked">
          {{integration.show ? ('On'|translate) : ('Off'|translate)}}
        </span>
      </ion-note>
    </button>

    <ion-item-divider>{{'More' | translate}}</ion-item-divider>

    <button ion-item (click)="openAdvancedPage()">
      <ion-icon class="item-img icon-settings" item-start>
        <img src="assets/img/settings-icons/icon-advanced.svg">
      </ion-icon>
      <span class="main-label" translate>Advanced</span>
    </button>

    <button ion-item (click)="openAboutPage()">
      <ion-icon class="item-img icon-settings" item-start>
        <img src="assets/img/settings-icons/icon-info.svg">
      </ion-icon>
      <span class="main-label" translate>About {{appName}}</span>
    </button>
  </ion-list>
</ion-content>